@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    scroll-behavior: smooth;
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  body {
    @apply font-sans text-slate-800 bg-slate-50;
  }

  body.is-locked {
    overflow: hidden;
  }

  h1 {
    @apply text-3xl sm:text-4xl md:text-5xl font-semibold tracking-tight leading-tight;
  }

  h2 {
    @apply text-2xl sm:text-3xl font-semibold tracking-tight;
  }

  h3 {
    @apply text-xl sm:text-2xl font-semibold;
  }
}

@layer components {
  .page-shell {
    @apply min-h-screen flex flex-col bg-slate-50;
  }

  .page-section {
    @apply py-12 sm:py-16 md:py-20 lg:py-24;
  }

  .section-heading {
    @apply flex flex-col sm:flex-row sm:items-baseline sm:justify-between gap-3 sm:gap-4 mb-6 sm:mb-8;
  }

  .section-title {
    @apply text-xl sm:text-2xl md:text-3xl font-semibold text-slate-900;
  }

  .section-subtitle {
    @apply text-sm md:text-base text-slate-500 max-w-2xl;
  }

  .btn {
    @apply inline-flex items-center justify-center rounded-full px-4 sm:px-5 py-2 sm:py-2.5 text-xs sm:text-sm font-medium transition-colors duration-150 whitespace-nowrap;
  }

  .btn-primary {
    @apply btn bg-brand-green text-white hover:bg-brand-green-dark;
  }

  .btn-secondary {
    @apply btn border border-brand-green text-brand-green bg-white hover:bg-brand-green-light;
  }

  .btn-accent {
    @apply btn bg-brand-orange text-white hover:bg-brand-orange-dark;
  }

  .tag {
    @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-medium bg-slate-100 text-slate-600;
  }

  .tag-soft {
    @apply bg-brand-green-light text-brand-green-dark;
  }

  .tag-outline {
    @apply border border-slate-300 bg-white;
  }

  .card {
    @apply bg-white rounded-2xl border border-slate-100 shadow-sm transition-all duration-200;
  }

  .card:hover {
    @apply shadow-elevated;
  }

  @media (prefers-reduced-motion: no-preference) {
    .card:hover {
      @apply -translate-y-1;
    }
  }

  .card:focus-within {
    @apply ring-2 ring-brand-green ring-offset-2;
  }

  .card-inner {
    @apply p-4 sm:p-5 md:p-6;
  }

  .card-meta {
    @apply text-xs text-slate-500 flex flex-wrap gap-3;
  }

  .filter-pill {
    @apply inline-flex items-center justify-center rounded-full border-2 border-slate-200 px-3 py-1.5 text-xs font-medium text-slate-600 cursor-pointer hover:border-brand-green hover:text-brand-green transition-all duration-200;
    min-width: fit-content;
    white-space: nowrap;
    position: relative;
    isolation: isolate;
    background-color: white;
  }

  .filter-pill-active {
    @apply border-brand-green text-brand-green bg-brand-green-light;
    position: relative;
    z-index: 10;
    font-weight: 600;
    border-width: 2px;
  }

  .form-label {
    @apply block text-sm font-medium text-slate-700 mb-1;
  }

  .form-input,
  .form-select,
  .form-textarea {
    @apply w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-brand-green focus:ring-2 focus:ring-brand-green-light outline-none;
  }

  .form-textarea {
    @apply min-h-[120px] resize-y;
  }

  .form-error {
    @apply mt-1 text-xs text-red-600;
  }

  .form-success {
    @apply mt-4 rounded-xl bg-green-50 px-4 py-3 text-sm text-emerald-700 border border-emerald-200;
  }

  .gallery-grid {
    @apply grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-4;
  }

  .gallery-item {
    @apply relative overflow-hidden rounded-xl bg-slate-200 cursor-pointer;
  }

  .gallery-item img {
    @apply w-full h-full object-cover transition-transform duration-300;
  }

  .gallery-item:hover img {
    @apply scale-105;
  }

  .lightbox-backdrop {
    @apply fixed inset-0 z-50 bg-black/70 flex items-center justify-center;
  }

  .lightbox-content {
    @apply bg-slate-900 rounded-2xl overflow-hidden max-w-4xl w-full mx-4;
  }

  .kpi-card {
    transition: transform 0.2s ease, background-color 0.2s ease;
  }

  @media (prefers-reduced-motion: no-preference) {
    .kpi-card:hover {
      transform: translateY(-2px);
      background-color: rgba(255, 255, 255, 0.15);
    }
  }

  .service-link .arrow {
    display: inline-block;
    transition: transform 0.2s ease;
  }

  @media (prefers-reduced-motion: no-preference) {
    .service-link:hover .arrow {
      transform: translateX(4px);
    }
  }

  .featured-project-card {
    @apply focus:outline-none focus:ring-2 focus:ring-brand-green focus:ring-offset-2;
  }

  /* Hero 跑马灯品牌带 */
  .cy-marquee {
    overflow: hidden;
    white-space: nowrap;
  }

  .cy-marquee__track {
    display: inline-flex;
    gap: 4rem;
    will-change: transform;
  }

  @media (prefers-reduced-motion: no-preference) {
    .cy-marquee__track {
      animation: cy-marquee 18s linear infinite;
    }
  }

  .cy-marquee__text {
    font-size: clamp(28px, 6vw, 72px);
    font-weight: 800;
    letter-spacing: 0.08em;
    color: rgba(255, 255, 255, 0.6);
    -webkit-text-stroke: 1px rgba(255, 255, 255, 0.35);
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    white-space: nowrap;
  }

  @keyframes cy-marquee {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-33.333%);
    }
  }

  /* Intro Overlay */
  .intro {
    position: fixed;
    inset: 0;
    z-index: 50;
    background-color: rgba(15, 23, 42, 0.95);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1),
                transform 0.6s cubic-bezier(0.4, 0, 0.2, 1),
                pointer-events 0s;
    pointer-events: auto;
  }

  .intro.is-leaving {
    opacity: 0;
    transform: translateY(-12px);
    pointer-events: none;
  }

  .intro__inner {
    text-align: center;
    color: white;
  }

  .intro__logo {
    font-size: 4rem;
    font-weight: 800;
    line-height: 1;
    margin-bottom: 1rem;
    color: #10b981;
  }

  .intro__text {
    font-size: 1rem;
    letter-spacing: 0.1em;
    opacity: 0.9;
  }

  @media (min-width: 640px) {
    .intro__logo {
      font-size: 5rem;
    }
    .intro__text {
      font-size: 1.125rem;
    }
  }

  /* 支持 prefers-reduced-motion */
  @media (prefers-reduced-motion: reduce) {
    .intro {
      transition: none !important;
    }
  }

  /* Scroll Reveal 動畫系統 */
  [data-reveal] {
    opacity: 0;
    transform: translateY(12px);
    transition: opacity 420ms ease, transform 420ms ease;
  }

  [data-reveal].is-revealed {
    opacity: 1;
    transform: none;
  }

  /* 動畫類型：fade（只改 opacity） */
  [data-reveal="fade"] {
    transform: none;
  }

  /* 動畫類型：left（從左移入） */
  [data-reveal="left"] {
    transform: translateX(-24px);
  }

  [data-reveal="left"].is-revealed {
    transform: translateX(0);
  }

  /* 動畫類型：right（從右移入） */
  [data-reveal="right"] {
    transform: translateX(24px);
  }

  [data-reveal="right"].is-revealed {
    transform: translateX(0);
  }

  /* 動畫類型：up（從下移入，預設） */
  [data-reveal="up"] {
    transform: translateY(12px);
  }

  [data-reveal="up"].is-revealed {
    transform: translateY(0);
  }

  /* 動畫類型：zoom（縮放） */
  [data-reveal="zoom"] {
    transform: scale(0.98);
  }

  [data-reveal="zoom"].is-revealed {
    transform: scale(1);
  }

  /* 支持 prefers-reduced-motion */
  @media (prefers-reduced-motion: reduce) {
    [data-reveal] {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
    }
  }
}


